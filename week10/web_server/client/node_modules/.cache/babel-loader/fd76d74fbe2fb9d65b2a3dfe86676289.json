{"ast":null,"code":"import _classCallCheck from \"/Users/yangfolder/Documents/WashU18f/CS503-1805_Yang_Wu/week10/tap-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yangfolder/Documents/WashU18f/CS503-1805_Yang_Wu/week10/tap-news/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yangfolder/Documents/WashU18f/CS503-1805_Yang_Wu/week10/tap-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yangfolder/Documents/WashU18f/CS503-1805_Yang_Wu/week10/tap-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yangfolder/Documents/WashU18f/CS503-1805_Yang_Wu/week10/tap-news/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/yangfolder/Documents/WashU18f/CS503-1805_Yang_Wu/week10/tap-news/src/NewsPanel/NewsPanel.js\";\nimport './NewsPanel.css';\nimport React from 'react';\nimport NewsCard from '../NewsCard/NewsCard';\nimport _ from 'lodash';\n\nvar NewsPanel =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NewsPanel, _React$Component);\n\n  function NewsPanel() {\n    var _this;\n\n    _classCallCheck(this, NewsPanel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewsPanel).call(this));\n    _this.state = {\n      news: null\n    };\n    return _this;\n  } // note: part of life cycle w/ override\n\n\n  _createClass(NewsPanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.loadMoreNews();\n      this.loadMoreNews = _.debounce(this.loadMoreNews, 1000);\n      window.addEventListener('scroll', function () {\n        return _this2.handleScroll();\n      });\n    }\n  }, {\n    key: \"handleScroll\",\n    value: function handleScroll() {\n      var scrollY = window.scrollY || window.pageYOffset || document.documentElement.scrollTop;\n\n      if (window.innerHeight + scrollY >= document.body.offsetHeight - 50) {\n        console.log('Locading more news...');\n        this.loadMoreNews();\n      }\n    }\n  }, {\n    key: \"loadMoreNews\",\n    value: function loadMoreNews() {\n      var _this3 = this;\n\n      // test only\n      this.setState({\n        news: [{\n          \"source\": \"The Wall Street Journal\",\n          \"title\": \"Berkshire Hathaway Benefits From US Tax Plan\",\n          \"description\": \"Berkshire Hathaway posted a $29 billion gain in 2017 related to changes in U.S. tax law, a one-time boost that inflated annual profits for the Omaha conglomerate.\",\n          \"url\": \"https://www.wsj.com/articles/berkshire-hathaway-posted-29-billion-gain-in-2017-from-u-s-tax-plan-1519480047\",\n          \"urlToImage\": \"https://si.wsj.net/public/resources/images/BN-XP717_3812B_TOP_20180224064100.jpg\",\n          \"publishedAt\": \"2018-02-24T18:42:00Z\",\n          \"digest\": \"3RjuEomJo26O1syZbU7OHA==\\n\",\n          \"reason\": \"Recommend\"\n        }, {\n          \"source\": \"fortune\",\n          \"title\": \"Here's How Much Bitcoin Elon Musk Owns\",\n          \"description\": \"Tesla CEO Elon Musk isn’t exactly active in cryptocurrency. Musk revealed this week on Twitter how much Bitcoin he owns—and it’s not much.\",\n          \"url\": \"http://fortune.com/2018/02/23/bitcoin-elon-musk-value/\",\n          \"urlToImage\": \"https://fortunedotcom.files.wordpress.com/2018/01/elon-musk-tesla-silicon-valley-sex-party.jpg\",\n          \"publishedAt\": \"2018-02-23T23:26:30Z\",\n          \"digest\": \"3RjuEomJo26OadyZbU7OHA==\\n\",\n          \"reason\": \"Recommend\"\n        }]\n      });\n      console.log('Actually triggered loading more news');\n      var news_url = 'http://' + window.location.hostname + ':3000' + '/news';\n      var request = new Request(news_url, {\n        method: 'GET'\n      });\n      fetch(request).then(function (res) {\n        return res.json();\n      }).then(function (news_list) {\n        _this3.setState({\n          news: _this3.state.news ? _this3.state.news.concat(news_list) : news_list\n        });\n      });\n    } // note: part of life cycle\n\n  }, {\n    key: \"renderNews\",\n    value: function renderNews() {\n      // list of news\n      var news_list = this.state.news.map(function (one_news) {\n        return React.createElement(\"a\", {\n          className: \"list-group-item\",\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(NewsCard, {\n          news: one_news,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }));\n      });\n      return React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"list-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, news_list));\n    } // note: part of life cycle\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.news) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, \"Loading...\");\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, this.renderNews());\n      }\n    }\n  }]);\n\n  return NewsPanel;\n}(React.Component);\n\nexport default NewsPanel;","map":{"version":3,"sources":["/Users/yangfolder/Documents/WashU18f/CS503-1805_Yang_Wu/week10/tap-news/src/NewsPanel/NewsPanel.js"],"names":["React","NewsCard","_","NewsPanel","state","news","loadMoreNews","debounce","window","addEventListener","handleScroll","scrollY","pageYOffset","document","documentElement","scrollTop","innerHeight","body","offsetHeight","console","log","setState","news_url","location","hostname","request","Request","method","fetch","then","res","json","news_list","concat","map","one_news","renderNews","Component"],"mappings":"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","sourcesContent":["import './NewsPanel.css';\n\nimport React from 'react';\nimport NewsCard from '../NewsCard/NewsCard';\nimport _ from 'lodash';\n\nclass NewsPanel extends React.Component {\n  constructor() {\n    super();\n    this.state = {news:null};\n  }\n\n  // note: part of life cycle w/ override\n  componentDidMount() {\n    this.loadMoreNews();\n    this.loadMoreNews = _.debounce(this.loadMoreNews, 1000);\n    window.addEventListener('scroll', () => this.handleScroll());\n  }\n\n  handleScroll() {\n    let scrollY = window.scrollY || window.pageYOffset || document.documentElement.scrollTop;\n    if ((window.innerHeight + scrollY) >= (document.body.offsetHeight - 50)) {\n      console.log('Locading more news...');\n      this.loadMoreNews();\n    }\n  }\n\n  loadMoreNews() {\n    // test only\n    this.setState({\n      news:\n        [{\n          \"source\": \"The Wall Street Journal\",\n          \"title\": \"Berkshire Hathaway Benefits From US Tax Plan\",\n          \"description\": \"Berkshire Hathaway posted a $29 billion gain in 2017 related to changes in U.S. tax law, a one-time boost that inflated annual profits for the Omaha conglomerate.\",\n          \"url\": \"https://www.wsj.com/articles/berkshire-hathaway-posted-29-billion-gain-in-2017-from-u-s-tax-plan-1519480047\",\n          \"urlToImage\": \"https://si.wsj.net/public/resources/images/BN-XP717_3812B_TOP_20180224064100.jpg\",\n          \"publishedAt\": \"2018-02-24T18:42:00Z\",\n          \"digest\":\"3RjuEomJo26O1syZbU7OHA==\\n\",\n          \"reason\": \"Recommend\"\n        },\n        {\n          \"source\": \"fortune\",\n          \"title\": \"Here's How Much Bitcoin Elon Musk Owns\",\n          \"description\": \"Tesla CEO Elon Musk isn’t exactly active in cryptocurrency. Musk revealed this week on Twitter how much Bitcoin he owns—and it’s not much.\",\n          \"url\": \"http://fortune.com/2018/02/23/bitcoin-elon-musk-value/\",\n          \"urlToImage\": \"https://fortunedotcom.files.wordpress.com/2018/01/elon-musk-tesla-silicon-valley-sex-party.jpg\",\n          \"publishedAt\": \"2018-02-23T23:26:30Z\",\n          \"digest\":\"3RjuEomJo26OadyZbU7OHA==\\n\",\n          \"reason\": \"Recommend\"\n        }]\n    });\n\n    console.log('Actually triggered loading more news');\n    const news_url = 'http://' + window.location.hostname + ':3000' + '/news';\n    const request = new Request(news_url, { method: 'GET' });\n\n    fetch(request)\n      .then(res => res.json())\n      .then(news_list => {\n        this.setState({\n          news: this.state.news ? this.state.news.concat(news_list) : news_list,\n        });\n      })\n  }\n\n\n  // note: part of life cycle\n  renderNews() {\n    // list of news\n    const news_list = this.state.news.map(one_news => {\n      return (\n        <a className='list-group-item' href='#'>\n          {/*news is a prop*/}\n          <NewsCard news={one_news} />\n        </a>\n      );\n    });\n\n    return (\n      <div className='container-fluid'>\n        <div className='list-group'>\n          {news_list}\n        </div>\n      </div>\n    );\n  }\n\n  // note: part of life cycle\n  render() {\n    if (!this.state.news) {\n      return (\n        <div>\n          Loading...\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          {this.renderNews()}\n        </div>\n      );\n    }\n  }\n}\n\nexport default NewsPanel;"]},"metadata":{},"sourceType":"module"}